<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Client portal for Bright Automations - Submit requests and get support">
    <title>Client Portal - Bright Automations</title>

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="images/Bright_AutoLOGO.png">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Space+Grotesk:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <!-- Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <style>
        :root {
            --primary: #0e1e32;
            --accent: #00e5ff;
            --white: #ffffff;
            --gray-200: #e5e7eb;
            --gray-400: #9ca3af;
            --gray-500: #6b7280;
            --gray-600: #4b5563;
            --dark: #0e1e32;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0e1e32 0%, #1a2744 100%);
            min-height: 100vh;
        }

        /* Loading State */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #0e1e32 0%, #1a2744 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }

        .loading-screen .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(255,255,255,0.2);
            border-radius: 50%;
            border-top-color: var(--accent);
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .portal-container {
            min-height: 100vh;
            padding: 2rem 1rem;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .portal-container.loaded {
            display: flex;
        }

        .portal-content {
            width: 100%;
            max-width: 500px;
        }

        /* User Header */
        .user-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1.5rem;
            padding: 1rem;
            background: rgba(255,255,255,0.08);
            border-radius: 12px;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            background: var(--accent);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: var(--dark);
            font-size: 1rem;
        }

        .user-name {
            color: white;
            font-weight: 600;
            font-size: 0.9375rem;
        }

        .user-email {
            color: rgba(255,255,255,0.5);
            font-size: 0.8125rem;
        }

        .logout-btn {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            color: rgba(255,255,255,0.7);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .logout-btn:hover {
            background: rgba(255,255,255,0.15);
            color: white;
        }

        /* Header */
        .portal-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .portal-logo {
            margin-bottom: 1.5rem;
        }

        .portal-logo a {
            color: var(--white);
            text-decoration: none;
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
        }

        .portal-logo .logo-icon {
            width: 40px;
            height: 40px;
            background: var(--accent);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            color: var(--dark);
        }

        .portal-header h1 {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.75rem;
            font-weight: 800;
            color: white;
            margin-bottom: 0.5rem;
        }

        .portal-header p {
            color: rgba(255,255,255,0.6);
            font-size: 1rem;
        }

        /* Quick Actions */
        .quick-actions {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .action-card {
            background: white;
            border-radius: 16px;
            padding: 1.25rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            border: none;
            text-align: left;
            width: 100%;
            font-family: inherit;
        }

        .action-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }

        .action-card:active {
            transform: scale(0.98);
        }

        .action-icon {
            width: 52px;
            height: 52px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            color: white;
            flex-shrink: 0;
        }

        .action-icon.website { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .action-icon.agent { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
        .action-icon.support { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
        .action-icon.blog { background: linear-gradient(135deg, #f97316 0%, #ea580c 100%); }
        .action-icon.social { background: linear-gradient(135deg, #ec4899 0%, #be185d 100%); }
        .action-icon.content { background: linear-gradient(135deg, #10b981 0%, #059669 100%); }
        .action-icon.seo { background: linear-gradient(135deg, #8b5cf6 0%, #6d28d9 100%); }

        /* More Options Section */
        .more-options-section {
            margin-top: 1.5rem;
        }

        .more-options-toggle {
            width: 100%;
            background: rgba(255,255,255,0.08);
            border: 1px solid rgba(255,255,255,0.15);
            border-radius: 12px;
            padding: 1rem;
            color: rgba(255,255,255,0.7);
            font-size: 0.9375rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            transition: all 0.2s ease;
            font-family: inherit;
        }

        .more-options-toggle:hover {
            background: rgba(255,255,255,0.12);
            color: white;
        }

        .more-options-toggle i {
            transition: transform 0.3s ease;
        }

        .more-options-toggle.open i {
            transform: rotate(180deg);
        }

        .more-options-list {
            display: none;
            flex-direction: column;
            gap: 0.75rem;
            margin-top: 1rem;
            animation: fadeIn 0.3s ease;
        }

        .more-options-list.open {
            display: flex;
        }

        .more-options-list .action-card {
            padding: 1rem;
        }

        .more-options-list .action-icon {
            width: 44px;
            height: 44px;
            font-size: 1.1rem;
        }

        .more-options-list .action-text h3 {
            font-size: 1rem;
        }

        .more-options-list .action-text p {
            font-size: 0.8125rem;
        }

        .action-text h3 {
            font-family: 'Space Grotesk', sans-serif;
            font-weight: 700;
            font-size: 1.0625rem;
            color: var(--dark);
            margin-bottom: 0.125rem;
        }

        .action-text p {
            color: var(--gray-500);
            font-size: 0.875rem;
            margin: 0;
        }

        .action-arrow {
            margin-left: auto;
            color: var(--gray-400);
            font-size: 1rem;
        }

        /* Form Container */
        .form-container {
            background: white;
            border-radius: 20px;
            padding: 1.5rem;
            display: none;
        }

        .form-container.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .form-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--gray-200);
        }

        .form-header-icon {
            width: 44px;
            height: 44px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.125rem;
            color: white;
        }

        .form-header h2 {
            font-family: 'Space Grotesk', sans-serif;
            font-weight: 700;
            font-size: 1.125rem;
            color: var(--dark);
            flex: 1;
        }

        .back-btn {
            background: none;
            border: none;
            color: var(--gray-400);
            font-size: 1.25rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 8px;
            transition: all 0.2s ease;
        }

        .back-btn:hover {
            background: var(--gray-200);
            color: var(--dark);
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 1.25rem;
        }

        .form-label {
            display: block;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 0.5rem;
            font-size: 0.9375rem;
        }

        .form-input,
        .form-textarea {
            width: 100%;
            padding: 0.875rem 1rem;
            border: 2px solid var(--gray-200);
            border-radius: 12px;
            font-size: 1rem;
            font-family: inherit;
            transition: border-color 0.2s ease;
            background: white;
        }

        .form-input:focus,
        .form-textarea:focus {
            outline: none;
            border-color: var(--accent);
        }

        .form-input:read-only {
            background: var(--gray-200);
            color: var(--gray-600);
        }

        .form-textarea {
            resize: vertical;
            min-height: 120px;
        }

        .submit-btn {
            width: 100%;
            padding: 1rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 700;
            font-family: inherit;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }

        .submit-btn:active {
            transform: scale(0.98);
        }

        .submit-btn.agent-btn {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .submit-btn.support-btn {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        /* Quick Contact */
        .quick-contact {
            margin-top: 2rem;
            text-align: center;
            padding: 1.25rem;
            background: rgba(255,255,255,0.08);
            border-radius: 16px;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .quick-contact p {
            color: rgba(255,255,255,0.6);
            font-size: 0.875rem;
            margin-bottom: 0.75rem;
        }

        .contact-links {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            flex-wrap: wrap;
        }

        .contact-links a {
            color: var(--accent);
            text-decoration: none;
            font-weight: 600;
            font-size: 0.9375rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: color 0.2s ease;
        }

        .contact-links a:hover {
            color: white;
        }

        /* Back to site link */
        .back-to-site {
            margin-top: 1.5rem;
            text-align: center;
        }

        .back-to-site a {
            color: rgba(255,255,255,0.5);
            text-decoration: none;
            font-size: 0.875rem;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            transition: color 0.2s ease;
        }

        .back-to-site a:hover {
            color: var(--accent);
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="spinner"></div>
    </div>

    <div id="portalContainer" class="portal-container">
        <div class="portal-content">
            <!-- User Header with Logout -->
            <div class="user-header">
                <div class="user-info">
                    <div class="user-avatar" id="userAvatar">?</div>
                    <div>
                        <div class="user-name" id="userName">Loading...</div>
                        <div class="user-email" id="userEmail"></div>
                    </div>
                </div>
                <button class="logout-btn" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>

            <!-- Header -->
            <div class="portal-header">
                <div class="portal-logo">
                    <a href="/">
                        <div class="logo-icon">B</div>
                        <span>Bright Automations</span>
                    </a>
                </div>
                <h1>Client Portal</h1>
                <p>How can we help you today?</p>
            </div>

            <!-- Quick Actions -->
            <div id="quickActions" class="quick-actions">
                <button class="action-card" onclick="showForm('website')">
                    <div class="action-icon website">
                        <i class="fas fa-globe"></i>
                    </div>
                    <div class="action-text">
                        <h3>Website Edits</h3>
                        <p>Request changes to your website</p>
                    </div>
                    <i class="fas fa-chevron-right action-arrow"></i>
                </button>

                <button class="action-card" onclick="showForm('agent')">
                    <div class="action-icon agent">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="action-text">
                        <h3>Agent Edits</h3>
                        <p>Update your AI automations</p>
                    </div>
                    <i class="fas fa-chevron-right action-arrow"></i>
                </button>

                <button class="action-card" onclick="showForm('support')">
                    <div class="action-icon support">
                        <i class="fas fa-headset"></i>
                    </div>
                    <div class="action-text">
                        <h3>Contact Support</h3>
                        <p>Get help from our team</p>
                    </div>
                    <i class="fas fa-chevron-right action-arrow"></i>
                </button>

                <!-- More Options Section -->
                <div class="more-options-section">
                    <button class="more-options-toggle" onclick="toggleMoreOptions()">
                        <span>More Options</span>
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="more-options-list" id="moreOptionsList">
                        <button class="action-card" onclick="showForm('blog')">
                            <div class="action-icon blog">
                                <i class="fas fa-blog"></i>
                            </div>
                            <div class="action-text">
                                <h3>Blog Edits</h3>
                                <p>Update your blog content</p>
                            </div>
                            <i class="fas fa-chevron-right action-arrow"></i>
                        </button>

                        <button class="action-card" onclick="showForm('social')">
                            <div class="action-icon social">
                                <i class="fas fa-share-alt"></i>
                            </div>
                            <div class="action-text">
                                <h3>Social Media</h3>
                                <p>Update social media content</p>
                            </div>
                            <i class="fas fa-chevron-right action-arrow"></i>
                        </button>

                        <button class="action-card" onclick="showForm('content')">
                            <div class="action-icon content">
                                <i class="fas fa-file-alt"></i>
                            </div>
                            <div class="action-text">
                                <h3>Content Updates</h3>
                                <p>Text, images, or media changes</p>
                            </div>
                            <i class="fas fa-chevron-right action-arrow"></i>
                        </button>

                        <button class="action-card" onclick="showForm('seo')">
                            <div class="action-icon seo">
                                <i class="fas fa-search"></i>
                            </div>
                            <div class="action-text">
                                <h3>SEO Updates</h3>
                                <p>Search optimization changes</p>
                            </div>
                            <i class="fas fa-chevron-right action-arrow"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Website Edit Form -->
            <div id="websiteForm" class="form-container">
                <div class="form-header">
                    <div class="form-header-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                        <i class="fas fa-globe"></i>
                    </div>
                    <h2>Website Edit Request</h2>
                    <button class="back-btn" onclick="hideForm()"><i class="fas fa-times"></i></button>
                </div>
                <form action="https://formspree.io/f/mnneglkj" method="POST">
                    <input type="hidden" name="request_type" value="Website Edit">
                    <div class="form-group">
                        <label class="form-label">Your Name</label>
                        <input type="text" name="name" class="form-input user-name-field" readonly>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Company Name</label>
                        <input type="text" name="company" class="form-input user-company-field" readonly>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" name="email" class="form-input user-email-field" readonly>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Phone</label>
                        <input type="tel" name="phone" class="form-input user-phone-field" readonly>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Which page needs editing? *</label>
                        <input type="text" name="page" class="form-input" placeholder="e.g., Homepage, About, Contact" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Priority</label>
                        <select name="priority" class="form-input">
                            <option value="normal">Normal</option>
                            <option value="high">High - Need it soon</option>
                            <option value="urgent">Urgent - ASAP</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Describe the changes *</label>
                        <textarea name="message" class="form-textarea" placeholder="What would you like changed or updated?" required></textarea>
                    </div>
                    <button type="submit" class="submit-btn">Submit Request</button>
                </form>
            </div>

            <!-- Agent Edit Form -->
            <div id="agentForm" class="form-container">
                <div class="form-header">
                    <div class="form-header-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                        <i class="fas fa-robot"></i>
                    </div>
                    <h2>Agent Edit Request</h2>
                    <button class="back-btn" onclick="hideForm()"><i class="fas fa-times"></i></button>
                </div>
                <form action="https://formspree.io/f/mnneglkj" method="POST">
                    <input type="hidden" name="request_type" value="Agent Edit">
                    <div class="form-group">
                        <label class="form-label">Your Name</label>
                        <input type="text" name="name" class="form-input user-name-field" readonly>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Company Name</label>
                        <input type="text" name="company" class="form-input user-company-field" readonly>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" name="email" class="form-input user-email-field" readonly>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Phone</label>
                        <input type="tel" name="phone" class="form-input user-phone-field" readonly>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Which agent or automation? *</label>
                        <input type="text" name="agent" class="form-input" placeholder="e.g., Email Bot, Chatbot, Lead Agent" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Priority</label>
                        <select name="priority" class="form-input">
                            <option value="normal">Normal</option>
                            <option value="high">High - Need it soon</option>
                            <option value="urgent">Urgent - ASAP</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Describe the changes *</label>
                        <textarea name="message" class="form-textarea" placeholder="What would you like changed or updated?" required></textarea>
                    </div>
                    <button type="submit" class="submit-btn agent-btn">Submit Request</button>
                </form>
            </div>

            <!-- Support Form -->
            <div id="supportForm" class="form-container">
                <div class="form-header">
                    <div class="form-header-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                        <i class="fas fa-headset"></i>
                    </div>
                    <h2>Contact Support</h2>
                    <button class="back-btn" onclick="hideForm()"><i class="fas fa-times"></i></button>
                </div>
                <form action="https://formspree.io/f/mnneglkj" method="POST">
                    <input type="hidden" name="request_type" value="Support Request">
                    <div class="form-group">
                        <label class="form-label">Your Name</label>
                        <input type="text" name="name" class="form-input user-name-field" readonly>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Company Name</label>
                        <input type="text" name="company" class="form-input user-company-field" readonly>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" name="email" class="form-input user-email-field" readonly>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Phone</label>
                        <input type="tel" name="phone" class="form-input user-phone-field" readonly>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Priority</label>
                        <select name="priority" class="form-input">
                            <option value="normal">Normal</option>
                            <option value="high">High - Need it soon</option>
                            <option value="urgent">Urgent - ASAP</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">How can we help? *</label>
                        <textarea name="message" class="form-textarea" placeholder="Describe your issue or question..." required></textarea>
                    </div>
                    <button type="submit" class="submit-btn support-btn">Send Message</button>
                </form>
            </div>

            <!-- Blog Edit Form (feature-based) -->
            <div id="blogForm" class="form-container">
                <div class="form-header">
                    <div class="form-header-icon" style="background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);">
                        <i class="fas fa-blog"></i>
                    </div>
                    <h2>Blog Edit Request</h2>
                    <button class="back-btn" onclick="hideForm()"><i class="fas fa-times"></i></button>
                </div>
                <form action="https://formspree.io/f/mnneglkj" method="POST">
                    <input type="hidden" name="request_type" value="Blog Edit">
                    <div class="form-group">
                        <label class="form-label">Your Name</label>
                        <input type="text" name="name" class="form-input user-name-field" readonly>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Company Name</label>
                        <input type="text" name="company" class="form-input user-company-field" readonly>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" name="email" class="form-input user-email-field" readonly>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Blog Post Title *</label>
                        <input type="text" name="blog_title" class="form-input" placeholder="Title of the blog post" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Is this a new post or editing existing? *</label>
                        <select name="blog_type" class="form-input" required>
                            <option value="">Select one...</option>
                            <option value="new">New Blog Post</option>
                            <option value="edit">Edit Existing Post</option>
                            <option value="delete">Delete Post</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Priority</label>
                        <select name="priority" class="form-input">
                            <option value="normal">Normal</option>
                            <option value="high">High - Need it soon</option>
                            <option value="urgent">Urgent - ASAP</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Blog Content / Changes *</label>
                        <textarea name="message" class="form-textarea" placeholder="Paste your blog content here, or describe the changes you'd like made..." required style="min-height: 200px;"></textarea>
                    </div>
                    <button type="submit" class="submit-btn" style="background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);">Submit Blog Request</button>
                </form>
            </div>

            <!-- Social Media Form -->
            <div id="socialForm" class="form-container">
                <div class="form-header">
                    <div class="form-header-icon" style="background: linear-gradient(135deg, #ec4899 0%, #be185d 100%);">
                        <i class="fas fa-share-alt"></i>
                    </div>
                    <h2>Social Media Request</h2>
                    <button class="back-btn" onclick="hideForm()"><i class="fas fa-times"></i></button>
                </div>
                <form action="https://formspree.io/f/mnneglkj" method="POST">
                    <input type="hidden" name="request_type" value="Social Media">
                    <div class="form-group">
                        <label class="form-label">Your Name</label>
                        <input type="text" name="name" class="form-input user-name-field" readonly>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Company Name</label>
                        <input type="text" name="company" class="form-input user-company-field" readonly>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" name="email" class="form-input user-email-field" readonly>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Which platform(s)? *</label>
                        <input type="text" name="platform" class="form-input" placeholder="e.g., Instagram, Facebook, LinkedIn" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Priority</label>
                        <select name="priority" class="form-input">
                            <option value="normal">Normal</option>
                            <option value="high">High - Need it soon</option>
                            <option value="urgent">Urgent - ASAP</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Describe your request *</label>
                        <textarea name="message" class="form-textarea" placeholder="What would you like posted or changed?" required></textarea>
                    </div>
                    <button type="submit" class="submit-btn" style="background: linear-gradient(135deg, #ec4899 0%, #be185d 100%);">Submit Request</button>
                </form>
            </div>

            <!-- Content Updates Form -->
            <div id="contentForm" class="form-container">
                <div class="form-header">
                    <div class="form-header-icon" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);">
                        <i class="fas fa-file-alt"></i>
                    </div>
                    <h2>Content Update Request</h2>
                    <button class="back-btn" onclick="hideForm()"><i class="fas fa-times"></i></button>
                </div>
                <form action="https://formspree.io/f/mnneglkj" method="POST">
                    <input type="hidden" name="request_type" value="Content Update">
                    <div class="form-group">
                        <label class="form-label">Your Name</label>
                        <input type="text" name="name" class="form-input user-name-field" readonly>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Company Name</label>
                        <input type="text" name="company" class="form-input user-company-field" readonly>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" name="email" class="form-input user-email-field" readonly>
                    </div>
                    <div class="form-group">
                        <label class="form-label">What type of content? *</label>
                        <select name="content_type" class="form-input" required>
                            <option value="">Select one...</option>
                            <option value="text">Text / Copy</option>
                            <option value="images">Images / Photos</option>
                            <option value="video">Video</option>
                            <option value="documents">Documents / PDFs</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Where does this go? *</label>
                        <input type="text" name="location" class="form-input" placeholder="e.g., Homepage hero, About page, Footer" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Priority</label>
                        <select name="priority" class="form-input">
                            <option value="normal">Normal</option>
                            <option value="high">High - Need it soon</option>
                            <option value="urgent">Urgent - ASAP</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Describe the changes *</label>
                        <textarea name="message" class="form-textarea" placeholder="Paste new content or describe what needs to be updated..." required></textarea>
                    </div>
                    <button type="submit" class="submit-btn" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);">Submit Request</button>
                </form>
            </div>

            <!-- SEO Updates Form -->
            <div id="seoForm" class="form-container">
                <div class="form-header">
                    <div class="form-header-icon" style="background: linear-gradient(135deg, #8b5cf6 0%, #6d28d9 100%);">
                        <i class="fas fa-search"></i>
                    </div>
                    <h2>SEO Update Request</h2>
                    <button class="back-btn" onclick="hideForm()"><i class="fas fa-times"></i></button>
                </div>
                <form action="https://formspree.io/f/mnneglkj" method="POST">
                    <input type="hidden" name="request_type" value="SEO Update">
                    <div class="form-group">
                        <label class="form-label">Your Name</label>
                        <input type="text" name="name" class="form-input user-name-field" readonly>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Company Name</label>
                        <input type="text" name="company" class="form-input user-company-field" readonly>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" name="email" class="form-input user-email-field" readonly>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Which page(s)? *</label>
                        <input type="text" name="pages" class="form-input" placeholder="e.g., Homepage, All pages, Blog posts" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">What SEO changes? *</label>
                        <select name="seo_type" class="form-input" required>
                            <option value="">Select one...</option>
                            <option value="meta">Meta titles & descriptions</option>
                            <option value="keywords">Keywords / Content</option>
                            <option value="speed">Page speed optimization</option>
                            <option value="schema">Schema / Structured data</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Priority</label>
                        <select name="priority" class="form-input">
                            <option value="normal">Normal</option>
                            <option value="high">High - Need it soon</option>
                            <option value="urgent">Urgent - ASAP</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Describe your request *</label>
                        <textarea name="message" class="form-textarea" placeholder="What SEO changes do you need? Include any target keywords..." required></textarea>
                    </div>
                    <button type="submit" class="submit-btn" style="background: linear-gradient(135deg, #8b5cf6 0%, #6d28d9 100%);">Submit Request</button>
                </form>
            </div>

            <!-- Quick Contact -->
            <div class="quick-contact">
                <p>Need immediate assistance?</p>
                <div class="contact-links">
                    <a href="tel:+6102569844"><i class="fas fa-phone"></i> (610) 256-9844</a>
                    <a href="mailto:admin@brightautomations.net"><i class="fas fa-envelope"></i> Email Us</a>
                </div>
            </div>

            <!-- Back to site -->
            <div class="back-to-site">
                <a href="/"><i class="fas fa-arrow-left"></i> Back to main site</a>
            </div>
        </div>
    </div>

    <script>
        // ============================================
        // SUPABASE CONFIGURATION
        // Replace these with your actual Supabase credentials
        // ============================================
        const SUPABASE_URL = 'https://urskikmqhgnvsqrcetsg.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVyc2tpa21xaGdudnNxcmNldHNnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU0Nzk0NjEsImV4cCI6MjA4MTA1NTQ2MX0.0P40qD-Q3Gvu3kRXGC7de30NYJ8oAVJhLi5cOmkH6OA';

        // Initialize Supabase client
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        // Global user data
        let currentUser = null;

        // Check authentication on page load
        async function checkAuth() {
            const { data: { session } } = await supabase.auth.getSession();

            if (!session) {
                // Not logged in, redirect to login
                window.location.href = '/client-login.html';
                return;
            }

            currentUser = session.user;

            // Get user profile from user_metadata or profiles table
            const userMeta = currentUser.user_metadata || {};

            // Update UI with user info
            const displayName = userMeta.full_name || userMeta.name || currentUser.email.split('@')[0];
            const company = userMeta.company || '';
            const phone = userMeta.phone || '';

            document.getElementById('userName').textContent = displayName;
            document.getElementById('userEmail').textContent = currentUser.email;
            document.getElementById('userAvatar').textContent = displayName.charAt(0).toUpperCase();

            // Pre-fill all form fields
            document.querySelectorAll('.user-name-field').forEach(el => el.value = displayName);
            document.querySelectorAll('.user-email-field').forEach(el => el.value = currentUser.email);
            document.querySelectorAll('.user-company-field').forEach(el => el.value = company);
            document.querySelectorAll('.user-phone-field').forEach(el => el.value = phone);

            // Hide loading, show portal
            document.getElementById('loadingScreen').style.display = 'none';
            document.getElementById('portalContainer').classList.add('loaded');
        }

        // Run auth check
        checkAuth();

        // Logout function
        async function logout() {
            await supabase.auth.signOut();
            window.location.href = '/client-login.html';
        }

        // Form functions
        function showForm(type) {
            document.getElementById('quickActions').style.display = 'none';
            document.getElementById(type + 'Form').classList.add('active');
        }

        function hideForm() {
            document.querySelectorAll('.form-container').forEach(form => {
                form.classList.remove('active');
            });
            document.getElementById('quickActions').style.display = 'flex';
        }

        // Toggle More Options
        function toggleMoreOptions() {
            const toggle = document.querySelector('.more-options-toggle');
            const list = document.getElementById('moreOptionsList');
            toggle.classList.toggle('open');
            list.classList.toggle('open');
        }
    </script>
</body>
</html>
